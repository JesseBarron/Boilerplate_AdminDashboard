<!DOCTYPE html>
<html>

<head>
    <% include ./partials/header %>
</head>

<body class="nav-md">

    <div class="container body">
        <div class="main_container">

            <% include ./partials/side-nav %>
            <% include ./partials/top-nav %>

                <!-- page content -->
                <div class="right_col" role="main" style="min-height: 1704px;">

                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2 class="alert alert-success">Activity Logs</h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li>
                                            <a class="collapse-link">
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                                <i class="fa fa-wrench"></i>
                                            </a>
                                            <ul class="dropdown-menu" role="menu">
                                                <li>
                                                    <a onclick="tableRefreshActivity()">Hard refresh</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a class="close-link">
                                                <i class="fa fa-close"></i>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">

                                    <table id="datatable-logs-activity" class="table table-striped table-bordered dataTable no-footer" role="grid">
                                        <thead>
                                            <tr>
                                                <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: auto;">Activity</th>
                                                <th class="sorting" tabindex="1" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 100%;">Content</th>
                                                <th class="sorting" tabindex="2" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 100%;">User</th>
                                                <th class="sorting" tabindex="3" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 100%;">IP</th>
                                                <th class="sorting_asc" tabindex="4" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 100%;">Date</th>
                                            </tr>
                                        </thead>
                                    </table>

                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2 class="alert alert-warning">Email Logs</h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li>
                                            <a class="collapse-link">
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                                <i class="fa fa-wrench"></i>
                                            </a>
                                            <ul class="dropdown-menu" role="menu">
                                                <li>
                                                    <a onclick="tableRefreshEmail()">Hard refresh</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a class="close-link">
                                                <i class="fa fa-close"></i>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">

                                    <table id="datatable-logs-email" class="table table-striped table-bordered dataTable no-footer" role="grid">
                                        <thead>
                                            <tr>
                                                <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 10%;">To</th>
                                                <th class="sorting" tabindex="1" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 40%;">Subject</th>
                                                <th class="sorting" tabindex="2" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 40%;">Content</th>
                                                <th class="sorting_asc" tabindex="4" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 10%;">Date</th>
                                            </tr>
                                        </thead>
                                    </table>

                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <div class="x_panel">
                                <div class="x_title">
                                    <h2 class="alert alert-danger">Error Logs</h2>
                                    <ul class="nav navbar-right panel_toolbox">
                                        <li>
                                            <a class="collapse-link">
                                                <i class="fa fa-chevron-up"></i>
                                            </a>
                                        </li>
                                        <li class="dropdown">
                                            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
                                                <i class="fa fa-wrench"></i>
                                            </a>
                                            <ul class="dropdown-menu" role="menu">
                                                <li>
                                                    <a onclick="tableRefreshError()">Hard refresh</a>
                                                </li>
                                            </ul>
                                        </li>
                                        <li>
                                            <a class="close-link">
                                                <i class="fa fa-close"></i>
                                            </a>
                                        </li>
                                    </ul>
                                    <div class="clearfix"></div>
                                </div>
                                <div class="x_content">

                                    <table id="datatable-logs-error" class="table table-striped table-bordered dataTable no-footer" role="grid">
                                        <thead>
                                            <tr>
                                                <th class="sorting" tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: auto;">Category</th>
                                                <th class="sorting" tabindex="1" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: 100%;">Error</th>
                                                <th class="sorting" tabindex="2" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: auto;">User</th>
                                                <th class="sorting" tabindex="3" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: auto;">IP</th>
                                                <th class="sorting_asc" tabindex="4" aria-controls="datatable" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending"
                                                    style="width: auto;">Date</th>
                                            </tr>
                                        </thead>
                                    </table>

                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /page content -->

            <% include ./partials/footer %>
                
        </div>
    </div>

    <% include ./partials/scripts %>

    <script>
        var $datatableActivityLogs = $('#datatable-logs-activity').DataTable({
            "ajax": "/admin/api/logs/activity",
            "deferRender": true,
            "columns": [
                {data:"activity"},
                {data:"content"},
                {data:"user"},
                {data:"ip"},
                // {data:"created"}
                {
                    data:"created",
                    render: function(date,x,row) {
                        return moment(date).format('LLL');
                    }
                }
            ],
            "order": [[4,"desc"]],
            "dataSrc": 'data',
            "scrollX": true
        });

        var $datatableEmailLogs = $('#datatable-logs-email').DataTable({
            "ajax": "/admin/api/logs/email",
            "deferRender": true,
            "columns": [
                {data:"to"},
                {data:"subject"},
                {data:"content"},
                // {data:"created"}
                {
                    data:"created",
                    render: function(date,x,row) {
                        return moment(date).format('LLL');
                    }
                }
            ],
            "order": [[3,"desc"]],
            "dataSrc": 'data',
            "scrollX": true
        });

        var $datatableErrorLogs = $('#datatable-logs-error').DataTable({
            "ajax": "/admin/api/logs/error",
            "deferRender": true,
            "columns": [
                {data:"category"},
                {data:"error"},
                {data:"user"},
                {data:"ip"},
                // {data:"created"}
                {
                    data:"created",
                    render: function(date,x,row) {
                        return moment(date).format('LLL');
                    }
                }
            ],
            "order": [[4,"desc"]],
            "dataSrc": 'data',
            "scrollX": true
        });

        function tableRefreshError() {
            $datatableErrorLogs.ajax.reload();
        }
        function tableRefreshEmail() {
            $datatableEmailLogs.ajax.reload();
        }
        function tableRefreshActivity() {
            $datatableActivityLogs.ajax.reload();
        }
        
    </script>

</body>

</html>
